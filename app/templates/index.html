{% extends './layout.html' %}
{% block title %} {{data.titulo}} {% endblock %}
{% block body %}
<h1>Página de inicio</h1>

<div class="container">
    <div class="row">
        <div class="col-sm-3">

        </div>
        <div class="col-sm">
            <div class="mx-auto">
                <img src="./static/img/logo-oficial-2021-700x214.png" class="img-fluid" alt="logo San Francisco Hogar">
            </div>
        </div>
        <div class="col-sm-3">

        </div>
    </div>
</div>

<div class="wrapper">
    <!-- Botón flotante para mostrar/ocultar el sidebar -->
    <button type="button" id="sidebarCollapse">
        &#9776; <!-- Icono de las tres barras (☰) -->
    </button>
    <!-- Sidebar -->
    <div id="sidebar">
        <div>
            <form id="miFormulario" method="post" class="d-flex justify-content-around align-items-center">
                <div>
                    <input class="form-control" type="text" name="dni" id="search" placeholder="Dí algo" required>
                </div>
                <button class="btn btn-success" type="submit">Buscar</button>
            </form>
        </div>
        <div id="search-results">
            <!-- Los resultados de la búsqueda se mostrarán aquí -->
        </div>
    </div>
</div>

<script>
    document.getElementById('sidebarCollapse').addEventListener('click', function () {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('active');
        const sidebarActive = sidebar.classList.contains('active');
        const sidebarCollapse = document.getElementById('sidebarCollapse');
        if (sidebarActive) {
            sidebarCollapse.style.right = '250px';
        } else {
            sidebarCollapse.style.right = '0';
        }
    });
    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.remove('active');
            const sidebarCollapse = document.getElementById('sidebarCollapse');
            sidebarCollapse.style.right = '0';
        }
    });
    $(document).ready(function () {
        $("#miFormulario").submit(function (event) {
            event.preventDefault();
            $.ajax({
                type: "POST",
                url: "/procesar_formulario",
                data: $(this).serialize(),
                success: function (response) {
                    $("#search-results").html(response.resultado);
                }
            });
        });
    });

</script>

{% endblock %}